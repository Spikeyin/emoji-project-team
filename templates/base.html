<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}è¡¨æƒ…ç¬¦å·æ£€æŸ¥å™¨{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <div class="container">
        <!-- å¯¼èˆªæ  -->
        {% if current_user.is_authenticated %}
        <nav class="navbar">
            <div class="nav-brand">
                <h2>ğŸ“Š è¡¨æƒ…ç¬¦å·æ£€æŸ¥å™¨</h2>
            </div>
            <div class="nav-menu">
                {% if current_user.is_student() %}
                <a href="{{ url_for('student.dashboard') }}" class="nav-link">ä¸»é¡µ</a>
                <a href="{{ url_for('student.courses') }}" class="nav-link">é€‰è¯¾</a>
                <a href="{{ url_for('student.send_emoji') }}" class="nav-link">å‘é€è¡¨æƒ…</a>
                <a href="{{ url_for('student.history') }}" class="nav-link">å†å²è®°å½•</a>
                {% else %}
                <a href="{{ url_for('admin.dashboard') }}" class="nav-link">ä¸»é¡µ</a>
                {% if current_user.is_admin() %}
                <a href="{{ url_for('admin.users') }}" class="nav-link">ç”¨æˆ·ç®¡ç†</a>
                {% endif %}
                <a href="{{ url_for('admin.courses') }}" class="nav-link">è¯¾ç¨‹ç®¡ç†</a>
                <a href="{{ url_for('admin.emoji_data') }}" class="nav-link">è¡¨æƒ…æ•°æ®</a>
                <a href="{{ url_for('admin.statistics') }}" class="nav-link">ç»Ÿè®¡åˆ†æ</a>
                {% endif %}
                <a href="{{ url_for('auth.change_password') }}" class="nav-link">ä¿®æ”¹å¯†ç </a>
                <a href="{{ url_for('auth.logout') }}" class="nav-link logout">é€€å‡º</a>
                <span class="nav-user">ğŸ‘¤ {{ current_user.username }}</span>
            </div>
        </nav>
        {% endif %}

        <!-- æ¶ˆæ¯æç¤º -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message }}
                <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <!-- ä¸»è¦å†…å®¹ -->
        <main class="main-content">
            {% block content %}{% endblock %}
        </main>

        <!-- é¡µè„š -->
        <footer class="footer">
            <p>&copy; 2024 è¡¨æƒ…ç¬¦å·æ£€æŸ¥å™¨ç³»ç»Ÿ | ç”¨äºæ•™å­¦åé¦ˆä¸å­¦ç”Ÿæƒ…ç»ªç›‘æµ‹</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>